{% load thumbnail %}

<div class="container">
  {% if pictures %}
    <div class="row text-center text-lg-left">
      {% for pic in pictures %}
        <div class="col-lg-3 col-md-4 col-xs-6 mb-4">
          {% thumbnail pic "300x300" crop="center" as im %}
            <a href="{{ pic.get_absolute_url }}">
              <img class="img-fluid img-thumbnail" src="{{ pic.image.url }}" height="{{ im.height }}" width="{{ im.width }}" />
            </a>
          {% endthumbnail %}
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>There are no images to display.</p>
  {% endif %}
</div>
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">

    {% if pictures.has_previous %}
      {% if selected_tags_for_url_parameter %}
        <li class="page-item">
          <a class="page-link" href="?page=1&tags={{ selected_tags_for_url_parameter }}">first</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ pictures.previous_page_number }}&tags={{ selected_tags_for_url_parameter }}">previous</a>
        </li>
      {% else %}
        <li class="page-item">
            <a class="page-link" href="?page=1">first</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ pictures.previous_page_number }}">previous</a>
        </li>
      {% endif %}
    {% endif %}

    {% for i in page_numbers %}
      {% if i == pictures.number %}
        <li class="page-item active">
          <span class="page-link disabled">{{ i }}</span><span class="sr-only">(current)</span>
        </li>
      {% else %}
        {% if selected_tags_for_url_parameter %}
          <li class="page-item">
            <a class="page-link" href="?page={{ i }}&tags={{ selected_tags_for_url_parameter }}">{{ i }}</a>
          </li>
        {% else %}
          <li class="page-item">
            <a class="page-link" href="?page={{ i }}">{{ i }}</a>
          </li>
        {% endif %}
      {% endif %}
    {% endfor %}

    {% if pictures.has_next %}
      {% if selected_tags_for_url_parameter %}
        <li class="page-item">
          <a class="page-link" href="?page={{ pictures.next_page_number }}&tags={{ selected_tags_for_url_parameter }}">next</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ pictures.paginator.num_pages }}&tags={{ selected_tags_for_url_parameter }}">last</a>
        </li>
      {% else %}
        <li class="page-item">
          <a class="page-link" href="?page={{ pictures.next_page_number }}">next</a>
        </li>
        <li clas="page-item">
            <a class="page-link" href="?page={{ pictures.paginator.num_pages }}">last</a>
        </li>
      {% endif %}
    {% endif %}

  </ul>
</nav>
